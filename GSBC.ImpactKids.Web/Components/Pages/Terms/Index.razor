@inherits EventListeningComponent
@page "/Terms"
@attribute [Authorize]
@inject ISchoolTermsService SchoolTermsService
@inject ISnackbar           Snackbar
@inject NavigationManager   Navigation
@inject IDialogService      DialogService

<PageTitle>Impact Kids Terms</PageTitle>
@if (_terms != null)
{
    <MudPaper Elevation="6" Class="mt-4">
        <IndexHeader Date="_date" OnDateChanged="OnDateChanged"/>
        <MudGrid Spacing="6" Justify="Justify.Center" Class="pt-3 pb-6 px-3">
            @foreach (SchoolTerm schoolTerm in _terms)
            {
                <MudItem xs="12" md="3">
                    <MudCard Elevation="6">
                        <MudCardHeader>
                            <CardHeaderContent>
                                <MudText Typo="Typo.h6">@schoolTerm.Name</MudText>
                                <MudText
                                    Typo="Typo.body2">@schoolTerm.StartDate.ToString("dd/MM") -> @schoolTerm.EndDate.ToString("dd/MM")</MudText>
                            </CardHeaderContent>
                            <CardHeaderActions>
                                <MudIconButton OnClick="@(_ => DeleteSchoolTerm(schoolTerm))"
                                               Icon="@Icons.Material.Filled.Delete"/>
                                <MudIconButton OnClick="@(_ => UpdateSchoolTerm(schoolTerm))"
                                               Icon="@Icons.Material.Filled.Edit"/>
                            </CardHeaderActions>
                        </MudCardHeader>
                        <MudCardContent>
                            <MudDivider/>
                            <ServicesList SchoolTerm="schoolTerm"/>
                            <MudDivider/>
                        </MudCardContent>
                        <MudCardActions Class="justify-end">
                            <MudButton Href="@($"/term/{schoolTerm.Id}")" Variant="Variant.Text" Color="Color.Primary">View</MudButton>
                        </MudCardActions>
                    </MudCard>
                </MudItem>
            }
        </MudGrid>
    </MudPaper>
}